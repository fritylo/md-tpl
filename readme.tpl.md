# MD_TPL
## Это простой препроцессор для маркдауна

Термины:
- кусочек - файл, который находится в папке с шаблонами
- сырой файл - файл с расширением .tpl.md, который мы хотим превратить в простой .md

## Содержание
- [Синтаксис кусочка](#синтаксис-кусочка)
- [Складирование кусочков](#складирование-кусочков)
- [Кусочки в сыром файле](#кусочки-в-сыром-файле)
- [Перевод из .tpl.md в .md](#перевод-из-tplmd-в-md)
- [Специальные переменные](#специальные-переменные)
- [Подробное описание спец. переменных](#подробное-описание-спец-переменных)
   - [$n](#n)

## Синтаксис кусочка

Для вставки переменной используется следующий синтаксис:

`{{ название_переменной }}`

В остальном этом простой маркдаун. Надеюсь вы знаете, что в маркдауне можно писать HTML код, поэтому MD_TPL удобно использовать чтобы обуздать куски ХТМЛя, и убрать его из сырого файла.

Например, кусочек для картинки с подписью:
```html
<center>
   <img src="{{src}}" />
   <br />
   <span>Рисунок - {{title}}</span>
</center>
```

Выше мы определили две переменных в кусочке.

## Складирование кусочков

Складывайте ваши кусочки в одну папку. Название файла определяет как будет вызываться кусочек в сыром файле.
Название файла кусочка идет в формате: `название.md`.

В нашем случае вот такая структура файлов:

```
.
└── md_tpl.py
```

То есть в текущей папке только наш скрипт-препроцессор. Давайте создадим папку `mdtpl`, вот так:
```
.
├── mdtpl
└── md_tpl.py
```

Ранее мы написали кусочек для картинки. Давайте создадим для него файл и положим код кусочка в него, вот так:
```
.
├── mdtpl
│   └── image.md
└── md_tpl.py
```

## Кусочки в сыром файле

Синтаксис вызова кусочка выглядит вот так:
```markdown
{{ название_кусочка >> параметр1: "значение1", ..., параметрN: "значениеN" }}
```
Специальный символ `>>` разделяет название кусочка и параметры. Названия параметров должны соответствовать тем, что вы оставили в вашем кусочке, в качестве переменных.

Давайте посмотрим на примере.

Создадим сырой файл, назовем его `readme.tpl.md`. Заодно добавим картинку с котиком, под названием kitten.jpg:
```
.
├── mdtpl
│   └── image.md
├── readme.tpl.md
├── kitten.jpg
└── md_tpl.py
```

И напишем в `readme.tpl.md` следующее:
```markdown
А вы любите котиков? Если да, то вы по адресу)) Посмотрите на мою коллекцию:

{{ image >> src:"./kitten.jpg", title:"Котик обыкновенный" }}

{{ image >> 
   src: "https://pbs.twimg.com/profile_images/774944118262919169/W58otMNV_400x400.jpg", 
   title: "Котик цветочный" }}
```

Как видите, можно переносить параметры на следующие строки. Ещё можете попробовать оторвать значение параметра от его названия, но скорее всего это вызовет ошибку ;)

Код выше показывает что бывают ситуации когда удобно писать в одну строку и когда надо писать в несколько. Используйте на своё усмотрение.

Отлично теперь мы готовы получить наш обычный маркдаун!!!

## Перевод из .tpl.md в .md

Для получения конечного маркдауна надо запустить скрипт md_tpl.py. Этот скрипт принимает несколько параметров. Рассмотрим команду ниже:
```
python3 md_tpl.py путь/к/исходному_файлу.tpl.py путь/для/вывода/файла.md путь/к/папке/с/кусочками
```
Итак у нас есь три параметра, подаваемые на вход команде:
1. Путь к tpl файлу
2. Путь к файлу для вывода (перезапишет или создаст)
3. Путь к папке с кусочками

В настоящий момент у нас вот такая структура файлов:
```
.
├── mdtpl
│   └── image.md
├── readme.tpl.md
├── kitten.jpg
└── md_tpl.py
```

Поэтому нашей командой будет:
```
python3 ./md_tpl.py ./readme.tpl.md ./README.md ./mdtpl
```

В результате мы получим вот такой маркдаун:
```md
А вы любите котиков? Если да, то вы по адресу)) Посмотрите на мою коллекцию:

<center>
   <img src="./kitten.jpg" />
   <br />
   <span>Рисунок - Котик обыкновенный</span>
</center>

<center>
   <img src="https://pbs.twimg.com/profile_images/774944118262919169/W58otMNV_400x400.jpg" />
   <br />
   <span>Рисунок - Котик цветочный</span>
</center>
```

## Специальные переменные

Специальные переменные используются в *кусочках* и содержат информацию о процессе обработки сырого файла. 

*Все спец. переменные начинаются со знака доллара ($).*

На текущем этапе в препроцессоре есть только одна специальная переменная.

Список специальных переменных:

- `$n` - Номер этого кусочка. Если говорить по русски - порядковый номер кусочка.

## Подробное описание спец. переменных
### $n
Эта переменная отражает текущий номер вызова кусочка. Ща будет оч простой пример и вы ве поймете ;)
Изменим наш кусочек с картинкой, сделаем чтобы у каждой картинки был номер.
```html
<center>
   <img src="{{src}}" />
   <br />
   <span>Рисунок {{$n}} - {{title}}</span>
</center>
```

И возьмем вот такой сырой файл:
```markdown
{{ image >> src:"./kitten1.jpg", title:"Котик обыкновенный" }}
{{ image >> src:"./kitten2.jpg", title:"Котик безбашенный" }}
```
После работы нашего препроцессора получим следующее:
```markdown
<center>
   <img src="./kitten1.jpg" />
   <br />
   <span>Рисунок 1 - Котик обыкновенный</span>
</center>
<center>
   <img src="./kitten2.jpg" />
   <br />
   <span>Рисунок 2 - Котик безбашенный</span>
</center>
```

Делай легче, делай играючи, кайфуй!!!)